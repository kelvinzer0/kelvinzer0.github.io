<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Sound from Server</title>
</head>
<body>
  <button onclick="playSoundFromServer()">Play Sound</button>

  <script>
    function playSoundFromServer() {
      const responseData = {
        "name": "speak",
        "message": "Halo! Jika Anda tertarik untuk membuat website, berikut adalah langkah-langkah dasar untuk memulainya:"
      };

      fetchAudioData(responseData)
        .then(audioData => playAudioData(audioData))
        .catch(error => {
          console.error("Error fetching or playing audio:", error);
        });
    }

    function fetchAudioData(responseData) {
      return fetch("https://criminalpolisheddebugmonitor--kelvin-yuliyuli.repl.co", {
        method: "POST",
        headers: {
          "Content-Type": "text/event-stream"
        },
        body: JSON.stringify(responseData)
      })
      .then(response => response.arrayBuffer());
    }

    function playAudioData(audioData) {
      const blob = new Blob([audioData], { type: "audio/mpeg" });
      const audioURL = URL.createObjectURL(blob);
      const audio = new Audio(audioURL);

      // Play the audio after a user interaction (button click)
      audio.play().catch(error => {
        console.error("Error playing audio:", error);
      });
    }
  </script>
</body>
</html>
